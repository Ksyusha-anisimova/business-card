// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å 'path' –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏ –∫ —Ñ–∞–π–ª–∞–º –∏ –ø–∞–ø–∫–∞–º
const path = require('path');

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–ª–∞–≥–∏–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML-—Ñ–∞–π–ª–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º
const HtmlWebpackPlugin = require('html-webpack-plugin');

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Webpack
module.exports = {
    // üìå –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –æ—Ç–∫—É–¥–∞ Webpack –Ω–∞—á–Ω—ë—Ç —Å–±–æ—Ä–∫—É
    entry: './src/index.js',

    // üìå –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (bundle)
    output: {
        // –ò–º—è —Ñ–∞–π–ª–∞ —Å–±–æ—Ä–∫–∏ (–º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ)
        filename: 'bundle.js',
        // –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ, –∫—É–¥–∞ Webpack –ø–æ–ª–æ–∂–∏—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å)
        path: path.resolve(__dirname, 'dist'),
        // –û—á–∏—Å—Ç–∫–∞ –ø–∞–ø–∫–∏ /dist –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–æ–π
        clean: true
    },

    // üìå –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–∂–∏–º ‚Äî 'development' (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) –∏–ª–∏ 'production' (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
    mode: 'development',

    // üìå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ (–∑–∞–≥—Ä—É–∑—á–∏–∫–∏)
    module: {
        rules: [
            {
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–∞–≤–∏–ª–æ –∫ —Ñ–∞–π–ª–∞–º —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .js –∏ .jsx
                test: /\.(js|jsx)$/,
                // –ò—Å–∫–ª—é—á–∞–µ–º –ø–∞–ø–∫—É node_modules –∏–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏
                exclude: /node_modules/,
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º babel-loader –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JS –∏ JSX —Ñ–∞–π–ª–æ–≤
                use: 'babel-loader'
            }
        ]
    },

    // üìå –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π .js –∏ .jsx
    resolve: {
        extensions: ['.js', '.jsx']
    },

    // üìå –ü–ª–∞–≥–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—à–∏—Ä—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Webpack
    plugins: [
        new HtmlWebpackPlugin({
            // HTML-—à–∞–±–ª–æ–Ω, –≤ –∫–æ—Ç–æ—Ä—ã–π Webpack –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–∏—Ç <script src="bundle.js">
            template: './public/index.html'
        })
    ],

    // üìå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    devServer: {
        // –ü–∞–ø–∫–∞, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –ø–æ–¥–∞–≤–∞—Ç—å—Å—è —Å–æ–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
        static: './dist',
        // –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–æ–µ–∫—Ç (localhost:3000)
        port: 3000,
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
        open: true
    }
};
